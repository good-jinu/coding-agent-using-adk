# LLM Agent[¶](https://google.github.io/adk-docs/agents/llm-agents/#llm-agent "Permanent link")

The `LlmAgent` (often aliased simply as `Agent`) is a core component in ADK, acting as the "thinking" part of your application. It leverages the power of a Large Language Model (LLM) for reasoning, understanding natural language, making decisions, generating responses, and interacting with tools.

Unlike deterministic [Workflow Agents](https://google.github.io/adk-docs/agents/workflow-agents/) that follow predefined execution paths, `LlmAgent` behavior is non-deterministic. It uses the LLM to interpret instructions and context, deciding dynamically how to proceed, which tools to use (if any), or whether to transfer control to another agent.

Building an effective `LlmAgent` involves defining its identity, clearly guiding its behavior through instructions, and equipping it with the necessary tools and capabilities.

## Defining the Agent's Identity and Purpose[¶](https://google.github.io/adk-docs/agents/llm-agents/#defining-the-agents-identity-and-purpose "Permanent link")

First, you need to establish what the agent _is_ and what it's _for_.

*   **`name` (Required):** Every agent needs a unique string identifier. This `name` is crucial for internal operations, especially in multi-agent systems where agents need to refer to or delegate tasks to each other. Choose a descriptive name that reflects the agent's function (e.g., `customer_support_router`, `billing_inquiry_agent`). Avoid reserved names like `user`.
    
*   **`description` (Optional, Recommended for Multi-Agent):** Provide a concise summary of the agent's capabilities. This description is primarily used by _other_ LLM agents to determine if they should route a task to this agent. Make it specific enough to differentiate it from peers (e.g., "Handles inquiries about current billing statements," not just "Billing agent").
    
*   **`model` (Required):** Specify the underlying LLM that will power this agent's reasoning. This is a string identifier like `"gemini-2.0-flash"`. The choice of model impacts the agent's capabilities, cost, and performance. See the [Models](https://google.github.io/adk-docs/agents/models/) page for available options and considerations.
    

[Python](#python)[Java](#java)

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-1)# Example: Defining the basic identity [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-2)capital_agent = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-3)    model="gemini-2.0-flash",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-4)    name="capital_agent",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-5)    description="Answers user questions about the capital city of a given country."    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-6)    # instruction and tools will be added next [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-0-7))`

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-1)// Example: Defining the basic identity [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-2)LlmAgent capitalAgent =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-3)    LlmAgent.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-4)        .model("gemini-2.0-flash")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-5)        .name("capital_agent")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-6)        .description("Answers user questions about the capital city of a given country.")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-7)        // instruction and tools will be added next        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-1-8)        .build();`

## Guiding the Agent: Instructions (`instruction`)[¶](https://google.github.io/adk-docs/agents/llm-agents/#guiding-the-agent-instructions-instruction "Permanent link")

The `instruction` parameter is arguably the most critical for shaping an `LlmAgent`'s behavior. It's a string (or a function returning a string) that tells the agent:

*   Its core task or goal.
*   Its personality or persona (e.g., "You are a helpful assistant," "You are a witty pirate").
*   Constraints on its behavior (e.g., "Only answer questions about X," "Never reveal Y").
*   How and when to use its `tools`. You should explain the purpose of each tool and the circumstances under which it should be called, supplementing any descriptions within the tool itself.
*   The desired format for its output (e.g., "Respond in JSON," "Provide a bulleted list").

**Tips for Effective Instructions:**

*   **Be Clear and Specific:** Avoid ambiguity. Clearly state the desired actions and outcomes.
*   **Use Markdown:** Improve readability for complex instructions using headings, lists, etc.
*   **Provide Examples (Few-Shot):** For complex tasks or specific output formats, include examples directly in the instruction.
*   **Guide Tool Use:** Don't just list tools; explain _when_ and _why_ the agent should use them.

**State:**

*   The instruction is a string template, you can use the `{var}` syntax to insert dynamic values into the instruction.
*   `{var}` is used to insert the value of the state variable named var.
*   `{artifact.var}` is used to insert the text content of the artifact named var.
*   If the state variable or artifact does not exist, the agent will raise an error. If you want to ignore the error, you can append a `?` to the variable name as in `{var?}`.

[Python](#python_1)[Java](#java_1)

``[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-1)# Example: Adding instructions [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-2)capital_agent = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-3)    model="gemini-2.0-flash",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-4)    name="capital_agent",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-5)    description="Answers user questions about the capital city of a given country.",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-6)    instruction="""You are an agent that provides the capital city of a country. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-7)When a user asks for the capital of a country: [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-8)1. Identify the country name from the user's query. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-9)2. Use the `get_capital_city` tool to find the capital. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-10)3. Respond clearly to the user, stating the capital city. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-11)Example Query: "What's the capital of {country}?" [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-12)Example Response: "The capital of France is Paris." [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-13)""",     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-14)    # tools will be added next [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-2-15))``

``[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-1)// Example: Adding instructions [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-2)LlmAgent capitalAgent =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-3)    LlmAgent.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-4)        .model("gemini-2.0-flash")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-5)        .name("capital_agent")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-6)        .description("Answers user questions about the capital city of a given country.")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-7)        .instruction(            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-8)            """            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-9)            You are an agent that provides the capital city of a country.            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-10)            When a user asks for the capital of a country:            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-11)            1. Identify the country name from the user's query.            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-12)            2. Use the `get_capital_city` tool to find the capital.            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-13)            3. Respond clearly to the user, stating the capital city.            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-14)            Example Query: "What's the capital of {country}?"            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-15)            Example Response: "The capital of France is Paris."            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-16)            """)        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-17)        // tools will be added next        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-3-18)        .build();``

_(Note: For instructions that apply to_ all _agents in a system, consider using `global_instruction` on the root agent, detailed further in the [Multi-Agents](https://google.github.io/adk-docs/agents/multi-agents/) section.)_

## Equipping the Agent: Tools (`tools`)[¶](https://google.github.io/adk-docs/agents/llm-agents/#equipping-the-agent-tools-tools "Permanent link")

Tools give your `LlmAgent` capabilities beyond the LLM's built-in knowledge or reasoning. They allow the agent to interact with the outside world, perform calculations, fetch real-time data, or execute specific actions.

*   **`tools` (Optional):** Provide a list of tools the agent can use. Each item in the list can be:
    *   A native function or method (wrapped as a `FunctionTool`). Python ADK automatically wraps the native function into a `FuntionTool` whereas, you must explicitly wrap your Java methods using `FunctionTool.create(...)`
    *   An instance of a class inheriting from `BaseTool`.
    *   An instance of another agent (`AgentTool`, enabling agent-to-agent delegation - see [Multi-Agents](https://google.github.io/adk-docs/agents/multi-agents/)).

The LLM uses the function/tool names, descriptions (from docstrings or the `description` field), and parameter schemas to decide which tool to call based on the conversation and its instructions.

[Python](#python_2)[Java](#java_2)

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-1)# Define a tool function [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-2)def get_capital_city(country: str) -> str:   [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-3)  """Retrieves the capital city for a given country."""  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-4)  # Replace with actual logic (e.g., API call, database lookup)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-5)  capitals = {"france": "Paris", "japan": "Tokyo", "canada": "Ottawa"}  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-6)  return capitals.get(country.lower(), f"Sorry, I don't know the capital of {country}.") [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-7)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-8)# Add the tool to the agent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-9)capital_agent = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-10)    model="gemini-2.0-flash",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-11)    name="capital_agent",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-12)    description="Answers user questions about the capital city of a given country.",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-13)    instruction="""You are an agent that provides the capital city of a country... (previous instruction text)""",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-14)    tools=[get_capital_city] # Provide the function directly [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-4-15))`

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-1)// Define a tool function [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-2)// Retrieves the capital city of a given country. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-3)public static Map<String, Object> getCapitalCity(         [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-4)        @Schema(name = "country", description = "The country to get capital for")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-5)        String country) {  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-6)  // Replace with actual logic (e.g., API call, database lookup)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-7)  Map<String, String> countryCapitals = new HashMap<>();  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-8)  countryCapitals.put("canada", "Ottawa");  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-9)  countryCapitals.put("france", "Paris");  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-10)  countryCapitals.put("japan", "Tokyo"); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-11)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-12)  String result =          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-13)          countryCapitals.getOrDefault(                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-14)                  country.toLowerCase(), "Sorry, I couldn't find the capital for " + country + ".");  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-15)  return Map.of("result", result); // Tools must return a Map [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-16)} [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-17)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-18)// Add the tool to the agent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-19)FunctionTool capitalTool = FunctionTool.create(experiment.getClass(), "getCapitalCity"); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-20)LlmAgent capitalAgent =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-21)    LlmAgent.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-22)        .model("gemini-2.0-flash")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-23)        .name("capital_agent")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-24)        .description("Answers user questions about the capital city of a given country.")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-25)        .instruction("You are an agent that provides the capital city of a country... (previous instruction text)")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-26)        .tools(capitalTool) // Provide the function wrapped as a FunctionTool        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-5-27)        .build();`

Learn more about Tools in the [Tools](https://google.github.io/adk-docs/tools/) section.

## Advanced Configuration & Control[¶](https://google.github.io/adk-docs/agents/llm-agents/#advanced-configuration-control "Permanent link")

Beyond the core parameters, `LlmAgent` offers several options for finer control:

### Fine-Tuning LLM Generation (`generate_content_config`)[¶](https://google.github.io/adk-docs/agents/llm-agents/#fine-tuning-llm-generation-generate_content_config "Permanent link")

You can adjust how the underlying LLM generates responses using `generate_content_config`.

*   **`generate_content_config` (Optional):** Pass an instance of `google.genai.types.GenerateContentConfig` to control parameters like `temperature` (randomness), `max_output_tokens` (response length), `top_p`, `top_k`, and safety settings.

[Python](#python_3)[Java](#java_3)

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-1)from google.genai import types [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-2)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-3)agent = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-4)    # ... other params    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-5)    generate_content_config=types.GenerateContentConfig(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-6)        temperature=0.2, # More deterministic output        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-7)        max_output_tokens=250    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-8)    ) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-6-9))`

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-1)import com.google.genai.types.GenerateContentConfig; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-2)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-3)LlmAgent agent =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-4)    LlmAgent.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-5)        // ... other params        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-6)        .generateContentConfig(GenerateContentConfig.builder()            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-7)            .temperature(0.2F) // More deterministic output            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-8)            .maxOutputTokens(250)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-9)            .build())        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-7-10)        .build();`

### Structuring Data (`input_schema`, `output_schema`, `output_key`)[¶](https://google.github.io/adk-docs/agents/llm-agents/#structuring-data-input_schema-output_schema-output_key "Permanent link")

For scenarios requiring structured data exchange with an `LLM Agent`, the ADK provides mechanisms to define expected input and desired output formats using schema definitions.

*   **`input_schema` (Optional):** Define a schema representing the expected input structure. If set, the user message content passed to this agent _must_ be a JSON string conforming to this schema. Your instructions should guide the user or preceding agent accordingly.
    
*   **`output_schema` (Optional):** Define a schema representing the desired output structure. If set, the agent's final response _must_ be a JSON string conforming to this schema.
    
    *   **Constraint:** Using `output_schema` enables controlled generation within the LLM but **disables the agent's ability to use tools or transfer control to other agents**. Your instructions must guide the LLM to produce JSON matching the schema directly.
*   **`output_key` (Optional):** Provide a string key. If set, the text content of the agent's _final_ response will be automatically saved to the session's state dictionary under this key. This is useful for passing results between agents or steps in a workflow.
    
    *   In Python, this might look like: `session.state[output_key] = agent_response_text`
    *   In Java: `session.state().put(outputKey, agentResponseText)`

[Python](#python_4)[Java](#java_4)

The input and output schema is typically a `Pydantic` BaseModel.

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-1)from pydantic import BaseModel, Field [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-2)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-3)class CapitalOutput(BaseModel):     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-4)    capital: str = Field(description="The capital of the country.") [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-5)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-6)structured_capital_agent = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-7)    # ... name, model, description    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-8)    instruction="""You are a Capital Information Agent. Given a country, respond ONLY with a JSON object containing the capital. Format: {"capital": "capital_name"}""",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-9)    output_schema=CapitalOutput, # Enforce JSON output    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-10)    output_key="found_capital"  # Store result in state['found_capital']    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-11)    # Cannot use tools=[get_capital_city] effectively here [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-8-12))`

The input and output schema is a `google.genai.types.Schema` object.

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-1)private static final Schema CAPITAL_OUTPUT =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-2)    Schema.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-3)        .type("OBJECT")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-4)        .description("Schema for capital city information.")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-5)        .properties(            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-6)            Map.of(                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-7)                "capital",                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-8)                Schema.builder()                    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-9)                    .type("STRING")                    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-10)                    .description("The capital city of the country.")                    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-11)                    .build()))        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-12)        .build(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-13)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-14)LlmAgent structuredCapitalAgent =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-15)    LlmAgent.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-16)        // ... name, model, description        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-17)        .instruction(                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-18)                "You are a Capital Information Agent. Given a country, respond ONLY with a JSON object containing the capital. Format: {\"capital\": \"capital_name\"}")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-19)        .outputSchema(capitalOutput) // Enforce JSON output        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-20)        .outputKey("found_capital") // Store result in state.get("found_capital")        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-21)        // Cannot use tools(getCapitalCity) effectively here        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-9-22)        .build();`

### Managing Context (`include_contents`)[¶](https://google.github.io/adk-docs/agents/llm-agents/#managing-context-include_contents "Permanent link")

Control whether the agent receives the prior conversation history.

*   **`include_contents` (Optional, Default: `'default'`):** Determines if the `contents` (history) are sent to the LLM.
    *   `'default'`: The agent receives the relevant conversation history.
    *   `'none'`: The agent receives no prior `contents`. It operates based solely on its current instruction and any input provided in the _current_ turn (useful for stateless tasks or enforcing specific contexts).

[Python](#python_5)[Java](#java_5)

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-10-1)stateless_agent = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-10-2)    # ... other params    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-10-3)    include_contents='none' [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-10-4))`

`[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-1)import com.google.adk.agents.LlmAgent.IncludeContents; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-2)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-3)LlmAgent statelessAgent =     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-4)    LlmAgent.builder()        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-5)        // ... other params        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-6)        .includeContents(IncludeContents.NONE)        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-11-7)        .build();`

### Planner[¶](https://google.github.io/adk-docs/agents/llm-agents/#planner "Permanent link")

![python_only](https://img.shields.io/badge/Currently_supported_in-Python-blue "This feature is currently available for Python. Java support is planned/ coming soon.")

**`planner` (Optional):** Assign a `BasePlanner` instance to enable multi-step reasoning and planning before execution. There are two main planners:

*   **`BuiltInPlanner`:** Leverages the model's built-in planning capabilities (e.g., Gemini's thinking feature). See [Gemini Thinking](https://ai.google.dev/gemini-api/docs/thinking) for details and examples.
    
    Here, the `thinking_budget` parameter guides the model on the number of thinking tokens to use when generating a response. The `include_thoughts` parameter controls whether the model should include its raw thoughts and internal reasoning process in the response.
    
    `[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-1)from google.adk import Agent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-2)from google.adk.planners import BuiltInPlanner [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-3)from google.genai import types [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-4)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-5)my_agent = Agent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-6)    model="gemini-2.5-flash",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-7)    planner=BuiltInPlanner(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-8)        thinking_config=types.ThinkingConfig(            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-9)            include_thoughts=True,            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-10)            thinking_budget=1024,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-11)        )    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-12)    ),    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-13)    # ... your tools here [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-12-14))`
    
*   **`PlanReActPlanner`:** This planner instructs the model to follow a specific structure in its output: first create a plan, then execute actions (like calling tools), and provide reasoning for its steps. _It's particularly useful for models that don't have a built-in "thinking" feature_.
    
    `[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-1)from google.adk import Agent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-2)from google.adk.planners import PlanReActPlanner [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-3)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-4)my_agent = Agent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-5)    model="gemini-2.0-flash",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-6)    planner=PlanReActPlanner(),    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-7)    # ... your tools here [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-13-8))`
    
    The agent's response will follow a structured format:
    
    `[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-1)[user]: ai news [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-2)[google_search_agent]: /*PLANNING*/ [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-3)1. Perform a Google search for "latest AI news" to get current updates and headlines related to artificial intelligence. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-4)2. Synthesize the information from the search results to provide a summary of recent AI news. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-5)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-6)/*ACTION*/ [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-7)/*REASONING*/ [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-8)The search results provide a comprehensive overview of recent AI news, covering various aspects like company developments, research breakthroughs, and applications. I have enough information to answer the user's request. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-9)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-10)/*FINAL_ANSWER*/ [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-11)Here's a summary of recent AI news: [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-14-12)....`
    

### Code Execution[¶](https://google.github.io/adk-docs/agents/llm-agents/#code-execution "Permanent link")

![python_only](https://img.shields.io/badge/Currently_supported_in-Python-blue "This feature is currently available for Python. Java support is planned/ coming soon.")

*   **`code_executor` (Optional):** Provide a `BaseCodeExecutor` instance to allow the agent to execute code blocks found in the LLM's response. ([See Tools/Built-in tools](https://google.github.io/adk-docs/tools/built-in-tools/)).

## Putting It Together: Example[¶](https://google.github.io/adk-docs/agents/llm-agents/#putting-it-together-example "Permanent link")

Code

Here's the complete basic `capital_agent`:

[Python](#python_6)[Java](#java_6)

``[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-1)# --- Full example code demonstrating LlmAgent with Tools vs. Output Schema --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-2)import json # Needed for pretty printing dicts [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-3)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-4)from google.adk.agents import LlmAgent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-5)from google.adk.runners import Runner [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-6)from google.adk.sessions import InMemorySessionService [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-7)from google.genai import types [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-8)from pydantic import BaseModel, Field [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-9)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-10)# --- 1. Define Constants --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-11)APP_NAME = "agent_comparison_app" [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-12)USER_ID = "test_user_456" [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-13)SESSION_ID_TOOL_AGENT = "session_tool_agent_xyz" [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-14)SESSION_ID_SCHEMA_AGENT = "session_schema_agent_xyz" [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-15)MODEL_NAME = "gemini-2.0-flash" [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-16)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-17)# --- 2. Define Schemas --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-18)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-19)# Input schema used by both agents [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-20)class CountryInput(BaseModel):     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-21)    country: str = Field(description="The country to get information about.") [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-22)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-23)# Output schema ONLY for the second agent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-24)class CapitalInfoOutput(BaseModel):     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-25)    capital: str = Field(description="The capital city of the country.")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-26)    # Note: Population is illustrative; the LLM will infer or estimate this    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-27)    # as it cannot use tools when output_schema is set.    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-28)    population_estimate: str = Field(description="An estimated population of the capital city.") [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-29)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-30)# --- 3. Define the Tool (Only for the first agent) --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-31)def get_capital_city(country: str) -> str:     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-32)    """Retrieves the capital city of a given country."""    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-33)    print(f"\n-- Tool Call: get_capital_city(country='{country}') --")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-34)    country_capitals = {        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-35)        "united states": "Washington, D.C.",        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-36)        "canada": "Ottawa",        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-37)        "france": "Paris",        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-38)        "japan": "Tokyo",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-39)    }    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-40)    result = country_capitals.get(country.lower(), f"Sorry, I couldn't find the capital for {country}.")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-41)    print(f"-- Tool Result: '{result}' --")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-42)    return result [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-43)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-44)# --- 4. Configure Agents --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-45)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-46)# Agent 1: Uses a tool and output_key [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-47)capital_agent_with_tool = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-48)    model=MODEL_NAME,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-49)    name="capital_agent_tool",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-50)    description="Retrieves the capital city using a specific tool.",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-51)    instruction="""You are a helpful agent that provides the capital city of a country using a tool. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-52)The user will provide the country name in a JSON format like {"country": "country_name"}. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-53)1. Extract the country name. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-54)2. Use the `get_capital_city` tool to find the capital. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-55)3. Respond clearly to the user, stating the capital city found by the tool. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-56)""",     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-57)    tools=[get_capital_city],    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-58)    input_schema=CountryInput,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-59)    output_key="capital_tool_result", # Store final text response [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-60)) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-61)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-62)# Agent 2: Uses output_schema (NO tools possible) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-63)structured_info_agent_schema = LlmAgent(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-64)    model=MODEL_NAME,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-65)    name="structured_info_agent_schema",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-66)    description="Provides capital and estimated population in a specific JSON format.",    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-67)    instruction=f"""You are an agent that provides country information. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-68)The user will provide the country name in a JSON format like {{"country": "country_name"}}. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-69)Respond ONLY with a JSON object matching this exact schema: [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-70){json.dumps(CapitalInfoOutput.model_json_schema(), indent=2)} [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-71)Use your knowledge to determine the capital and estimate the population. Do not use any tools. [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-72)""",     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-73)    # *** NO tools parameter here - using output_schema prevents tool use ***    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-74)    input_schema=CountryInput,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-75)    output_schema=CapitalInfoOutput, # Enforce JSON output structure    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-76)    output_key="structured_info_result", # Store final JSON response [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-77)) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-78)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-79)# --- 5. Set up Session Management and Runners --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-80)session_service = InMemorySessionService() [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-81)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-82)# Create separate sessions for clarity, though not strictly necessary if context is managed [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-83)session_service.create_session(app_name=APP_NAME, user_id=USER_ID, session_id=SESSION_ID_TOOL_AGENT) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-84)session_service.create_session(app_name=APP_NAME, user_id=USER_ID, session_id=SESSION_ID_SCHEMA_AGENT) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-85)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-86)# Create a runner for EACH agent [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-87)capital_runner = Runner(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-88)    agent=capital_agent_with_tool,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-89)    app_name=APP_NAME,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-90)    session_service=session_service [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-91)) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-92)structured_runner = Runner(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-93)    agent=structured_info_agent_schema,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-94)    app_name=APP_NAME,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-95)    session_service=session_service [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-96)) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-97)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-98)# --- 6. Define Agent Interaction Logic --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-99)async def call_agent_and_print(     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-100)    runner_instance: Runner,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-101)    agent_instance: LlmAgent,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-102)    session_id: str,    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-103)    query_json: str [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-104)):     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-105)    """Sends a query to the specified agent/runner and prints results."""    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-106)    print(f"\n>>> Calling Agent: '{agent_instance.name}' | Query: {query_json}") [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-107)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-108)    user_content = types.Content(role='user', parts=[types.Part(text=query_json)]) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-109)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-110)    final_response_content = "No final response received."    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-111)    async for event in runner_instance.run_async(user_id=USER_ID, session_id=session_id, new_message=user_content):        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-112)        # print(f"Event: {event.type}, Author: {event.author}") # Uncomment for detailed logging        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-113)        if event.is_final_response() and event.content and event.content.parts:            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-114)            # For output_schema, the content is the JSON string itself            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-115)            final_response_content = event.content.parts[0].text [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-116)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-117)    print(f"<<< Agent '{agent_instance.name}' Response: {final_response_content}") [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-118)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-119)    current_session = session_service.get_session(app_name=APP_NAME,                                                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-120)                                                  user_id=USER_ID,                                                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-121)                                                  session_id=session_id)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-122)    stored_output = current_session.state.get(agent_instance.output_key) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-123)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-124)    # Pretty print if the stored output looks like JSON (likely from output_schema)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-125)    print(f"--- Session State ['{agent_instance.output_key}']: ", end="")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-126)    try:        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-127)        # Attempt to parse and pretty print if it's JSON        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-128)        parsed_output = json.loads(stored_output)        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-129)        print(json.dumps(parsed_output, indent=2))    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-130)    except (json.JSONDecodeError, TypeError):         [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-131)         # Otherwise, print as string        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-132)        print(stored_output)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-133)    print("-" * 30) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-134) [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-135)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-136)# --- 7. Run Interactions --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-137)async def main():     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-138)    print("--- Testing Agent with Tool ---")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-139)    await call_agent_and_print(capital_runner, capital_agent_with_tool, SESSION_ID_TOOL_AGENT, '{"country": "France"}')    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-140)    await call_agent_and_print(capital_runner, capital_agent_with_tool, SESSION_ID_TOOL_AGENT, '{"country": "Canada"}') [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-141)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-142)    print("\n\n--- Testing Agent with Output Schema (No Tool Use) ---")    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-143)    await call_agent_and_print(structured_runner, structured_info_agent_schema, SESSION_ID_SCHEMA_AGENT, '{"country": "France"}')    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-144)    await call_agent_and_print(structured_runner, structured_info_agent_schema, SESSION_ID_SCHEMA_AGENT, '{"country": "Japan"}') [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-145)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-146)if __name__ == "__main__":     [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-15-147)    await main()``

``[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-1)// --- Full example code demonstrating LlmAgent with Tools vs. Output Schema --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-2)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-3)import com.google.adk.agents.LlmAgent; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-4)import com.google.adk.events.Event; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-5)import com.google.adk.runner.Runner; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-6)import com.google.adk.sessions.InMemorySessionService; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-7)import com.google.adk.sessions.Session; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-8)import com.google.adk.tools.Annotations; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-9)import com.google.adk.tools.FunctionTool; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-10)import com.google.genai.types.Content; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-11)import com.google.genai.types.Part; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-12)import com.google.genai.types.Schema; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-13)import io.reactivex.rxjava3.core.Flowable; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-14)import java.util.HashMap; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-15)import java.util.List; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-16)import java.util.Map; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-17)import java.util.Optional; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-18)[](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-19)public class LlmAgentExample { [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-20)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-21)  // --- 1. Define Constants ---  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-22)  private static final String MODEL_NAME = "gemini-2.0-flash";  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-23)  private static final String APP_NAME = "capital_agent_tool";  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-24)  private static final String USER_ID = "test_user_456";  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-25)  private static final String SESSION_ID_TOOL_AGENT = "session_tool_agent_xyz";  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-26)  private static final String SESSION_ID_SCHEMA_AGENT = "session_schema_agent_xyz"; [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-27)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-28)  // --- 2. Define Schemas --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-29)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-30)  // Input schema used by both agents  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-31)  private static final Schema COUNTRY_INPUT_SCHEMA =      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-32)      Schema.builder()          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-33)          .type("OBJECT")          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-34)          .description("Input for specifying a country.")          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-35)          .properties(              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-36)              Map.of(                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-37)                  "country",                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-38)                  Schema.builder()                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-39)                      .type("STRING")                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-40)                      .description("The country to get information about.")                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-41)                      .build()))          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-42)          .required(List.of("country"))          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-43)          .build(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-44)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-45)  // Output schema ONLY for the second agent  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-46)  private static final Schema CAPITAL_INFO_OUTPUT_SCHEMA =      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-47)      Schema.builder()          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-48)          .type("OBJECT")          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-49)          .description("Schema for capital city information.")          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-50)          .properties(              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-51)              Map.of(                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-52)                  "capital",                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-53)                  Schema.builder()                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-54)                      .type("STRING")                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-55)                      .description("The capital city of the country.")                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-56)                      .build(),                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-57)                  "population_estimate",                  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-58)                  Schema.builder()                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-59)                      .type("STRING")                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-60)                      .description("An estimated population of the capital city.")                      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-61)                      .build()))          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-62)          .required(List.of("capital", "population_estimate"))          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-63)          .build(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-64)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-65)  // --- 3. Define the Tool (Only for the first agent) ---  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-66)  // Retrieves the capital city of a given country.  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-67)  public static Map<String, Object> getCapitalCity(      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-68)      @Annotations.Schema(name = "country", description = "The country to get capital for")      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-69)      String country) {    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-70)    System.out.printf("%n-- Tool Call: getCapitalCity(country='%s') --%n", country);    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-71)    Map<String, String> countryCapitals = new HashMap<>();    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-72)    countryCapitals.put("united states", "Washington, D.C.");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-73)    countryCapitals.put("canada", "Ottawa");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-74)    countryCapitals.put("france", "Paris");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-75)    countryCapitals.put("japan", "Tokyo"); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-76)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-77)    String result =        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-78)        countryCapitals.getOrDefault(            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-79)            country.toLowerCase(), "Sorry, I couldn't find the capital for " + country + ".");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-80)    System.out.printf("-- Tool Result: '%s' --%n", result);    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-81)    return Map.of("result", result); // Tools must return a Map  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-82)  } [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-83)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-84)  public static void main(String[] args){    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-85)    LlmAgentExample agentExample = new LlmAgentExample();    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-86)    FunctionTool capitalTool = FunctionTool.create(agentExample.getClass(), "getCapitalCity"); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-87)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-88)    // --- 4. Configure Agents --- [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-89)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-90)    // Agent 1: Uses a tool and output_key    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-91)    LlmAgent capitalAgentWithTool =        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-92)        LlmAgent.builder()            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-93)            .model(MODEL_NAME)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-94)            .name("capital_agent_tool")            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-95)            .description("Retrieves the capital city using a specific tool.")            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-96)            .instruction(              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-97)              """              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-98)              You are a helpful agent that provides the capital city of a country using a tool.              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-99)              1. Extract the country name.              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-100)              2. Use the `get_capital_city` tool to find the capital.              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-101)              3. Respond clearly to the user, stating the capital city found by the tool.              [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-102)              """)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-103)            .tools(capitalTool)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-104)            .inputSchema(COUNTRY_INPUT_SCHEMA)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-105)            .outputKey("capital_tool_result") // Store final text response            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-106)            .build(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-107)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-108)    // Agent 2: Uses an output schema    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-109)    LlmAgent structuredInfoAgentSchema =        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-110)        LlmAgent.builder()            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-111)            .model(MODEL_NAME)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-112)            .name("structured_info_agent_schema")            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-113)            .description("Provides capital and estimated population in a specific JSON format.")            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-114)            .instruction(                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-115)                String.format("""                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-116)                You are an agent that provides country information.                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-117)                Respond ONLY with a JSON object matching this exact schema: %s                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-118)                Use your knowledge to determine the capital and estimate the population. Do not use any tools.                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-119)                """, CAPITAL_INFO_OUTPUT_SCHEMA.toJson()))            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-120)            // *** NO tools parameter here - using output_schema prevents tool use ***            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-121)            .inputSchema(COUNTRY_INPUT_SCHEMA)            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-122)            .outputSchema(CAPITAL_INFO_OUTPUT_SCHEMA) // Enforce JSON output structure            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-123)            .outputKey("structured_info_result") // Store final JSON response            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-124)            .build(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-125)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-126)    // --- 5. Set up Session Management and Runners ---    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-127)    InMemorySessionService sessionService = new InMemorySessionService(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-128)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-129)    sessionService.createSession(APP_NAME, USER_ID, null, SESSION_ID_TOOL_AGENT).blockingGet();    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-130)    sessionService.createSession(APP_NAME, USER_ID, null, SESSION_ID_SCHEMA_AGENT).blockingGet(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-131)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-132)    Runner capitalRunner = new Runner(capitalAgentWithTool, APP_NAME, null, sessionService);    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-133)    Runner structuredRunner = new Runner(structuredInfoAgentSchema, APP_NAME, null, sessionService); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-134)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-135)    // --- 6. Run Interactions ---    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-136)    System.out.println("--- Testing Agent with Tool ---");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-137)    agentExample.callAgentAndPrint(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-138)        capitalRunner, capitalAgentWithTool, SESSION_ID_TOOL_AGENT, "{\"country\": \"France\"}");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-139)    agentExample.callAgentAndPrint(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-140)        capitalRunner, capitalAgentWithTool, SESSION_ID_TOOL_AGENT, "{\"country\": \"Canada\"}"); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-141)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-142)    System.out.println("\n\n--- Testing Agent with Output Schema (No Tool Use) ---");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-143)    agentExample.callAgentAndPrint(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-144)        structuredRunner,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-145)        structuredInfoAgentSchema,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-146)        SESSION_ID_SCHEMA_AGENT,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-147)        "{\"country\": \"France\"}");    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-148)    agentExample.callAgentAndPrint(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-149)        structuredRunner,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-150)        structuredInfoAgentSchema,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-151)        SESSION_ID_SCHEMA_AGENT,        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-152)        "{\"country\": \"Japan\"}");  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-153)  } [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-154)  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-155)  // --- 7. Define Agent Interaction Logic ---  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-156)  public void callAgentAndPrint(Runner runner, LlmAgent agent, String sessionId, String queryJson) {    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-157)    System.out.printf(        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-158)        "%n>>> Calling Agent: '%s' | Session: '%s' | Query: %s%n",        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-159)        agent.name(), sessionId, queryJson); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-160)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-161)    Content userContent = Content.fromParts(Part.fromText(queryJson));    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-162)    final String[] finalResponseContent = {"No final response received."};    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-163)    Flowable<Event> eventStream = runner.runAsync(USER_ID, sessionId, userContent); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-164)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-165)    // Stream event response    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-166)    eventStream.blockingForEach(event -> {          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-167)          if (event.finalResponse() && event.content().isPresent()) {            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-168)            event                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-169)                .content()                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-170)                .get()                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-171)                .parts()                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-172)                .flatMap(parts -> parts.isEmpty() ? Optional.empty() : Optional.of(parts.get(0)))                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-173)                .flatMap(Part::text)                [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-174)                .ifPresent(text -> finalResponseContent[0] = text);          [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-175)          }        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-176)        }); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-177)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-178)    System.out.printf("<<< Agent '%s' Response: %s%n", agent.name(), finalResponseContent[0]); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-179)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-180)    // Retrieve the session again to get the updated state    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-181)    Session updatedSession =        [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-182)        runner            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-183)            .sessionService()            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-184)            .getSession(APP_NAME, USER_ID, sessionId, Optional.empty())            [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-185)            .blockingGet(); [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-186)    [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-187)    if (updatedSession != null && agent.outputKey().isPresent()) {      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-188)      // Print to verify if the stored output looks like JSON (likely from output_schema)      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-189)      System.out.printf("--- Session State ['%s']: ", agent.outputKey().get());      [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-190)      }  [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-191)  } [](https://google.github.io/adk-docs/agents/llm-agents/#__codelineno-16-192)}``

_(This example demonstrates the core concepts. More complex agents might incorporate schemas, context control, planning, etc.)_

## Related Concepts (Deferred Topics)[¶](https://google.github.io/adk-docs/agents/llm-agents/#related-concepts-deferred-topics "Permanent link")

While this page covers the core configuration of `LlmAgent`, several related concepts provide more advanced control and are detailed elsewhere:

*   **Callbacks:** Intercepting execution points (before/after model calls, before/after tool calls) using `before_model_callback`, `after_model_callback`, etc. See [Callbacks](https://google.github.io/adk-docs/callbacks/types-of-callbacks/).
*   **Multi-Agent Control:** Advanced strategies for agent interaction, including planning (`planner`), controlling agent transfer (`disallow_transfer_to_parent`, `disallow_transfer_to_peers`), and system-wide instructions (`global_instruction`). See [Multi-Agents](https://google.github.io/adk-docs/agents/multi-agents/).